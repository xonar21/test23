/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/vue@2.6.11/src/server/webpack-plugin/server.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{validate,isJS,onEmit}from"./util";export default class VueSSRServerPlugin{constructor(e={}){this.options=Object.assign({filename:"vue-ssr-server-bundle.json"},e)}apply(e){validate(e),onEmit(e,"vue-server-plugin",(e,s)=>{const t=e.getStats().toJson(),n=Object.keys(t.entrypoints)[0],r=t.entrypoints[n];if(!r)return s();const o=r.assets.filter(isJS);if(o.length>1)throw new Error("Server-side bundle should have one single entry file. Avoid using CommonsChunkPlugin in the server config.");const i=o[0];if(!i||"string"!=typeof i)throw new Error(`Entry "${n}" not found. Did you specify the correct entry option?`);const a={entry:i,files:{},maps:{}};t.assets.forEach(s=>{isJS(s.name)?a.files[s.name]=e.assets[s.name].source():s.name.match(/\.js\.map$/)&&(a.maps[s.name.replace(/\.map$/,"")]=JSON.parse(e.assets[s.name].source())),delete e.assets[s.name]});const l=JSON.stringify(a,null,2),u=this.options.filename;e.assets[u]={source:()=>l,size:()=>l.length},s()})}}
//# sourceMappingURL=/sm/bee2c86a06a3353d990708198b219530a365a7508fa86d584cb6c597744b7b01.map