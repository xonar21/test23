@using GR.Identity.Abstractions
@using GR.Notifications.Razor.Extensions
@inject IAppProvider AppProvider

@{
	Layout = null;
}

<!DOCTYPE html>
@if (User.Identity.IsAuthenticated)
{
	<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>@ViewData["Title"]</title>
		@RenderSection("PreScripts", required: false)
		<partial name="_BootstrapThemeStyles" />
		<partial name="_BootstrapThemeScripts" />
		@RenderSection("Styles", required: false)
		@Html.PartialViewStyles()
		@Html.IncludeCoreJavascriptPlugins()
		@Html.IncludeNotificationJavascriptPlugins()
		<link rel="stylesheet" href="~/lib/bootstrap-select/css/bootstrap-select.min.css">
		<link rel="stylesheet" href="~/lib/bootstrap-datepicker/css/bootstrap-datepicker.min.css">
		<link rel="stylesheet" href="~/themes/gear/css/loader.css">
		<link rel="stylesheet" href="~/themes/gear/css/gear.min.css">
		<link rel="stylesheet" href="~/themes/gear/css/style.css">
		<link rel="stylesheet" href="~/themes/public/css/crm.css" />
	</head>
	<body>
		<div id="app"></div>
		<script src="~/lib/vue/dist/vue.js"></script>
		<script src="~/lib/vuex/dist/vuex.min.js"></script>
		<script src="~/lib/microsoft-signalr/signalr.js"></script>
		@*<script src="~/lib/aspnet-signalr/signalr.js"></script>*@
		<script src="~/lib/vuex-persistedstate/vuex-persistedstate.umd.js"></script>
		<script src="~/themes//gear/js/vuetable-2-full.js"></script>
		<script src="~/lib/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.12/js/bootstrap-select.min.js"></script>
		<script src="~/themes/gear/js/ckeditor/ckeditor.js"></script>
		<script src="~/themes/gear/js/components/customCkeditor.js"></script>
		<script src="~/themes/gear/js/vue-tel-input/vue-tel-input.js"></script>
		<script src="~/lib/Sortable/Sortable.js"></script>
		<script src="~/themes/gear/utils/validations.js"></script>
		<script src="~/themes/gear/utils/config.js"></script>
		<script src="~/themes/gear/utils/requester.js"></script>
		<script src="~/themes/gear/js/vue-async-computed/vue-async-computed.js"></script>
		<script src="~/themes/gear/js/components/loader.js"></script>
		<script src="~/themes/gear/js/components/hamburger.js"></script>
		<script src="~/themes/gear/js/components/breadcrumb.js"></script>
		<script src="~/themes/gear/js/components/button.js"></script>
		<script src="~/themes/gear/js/components/search.js"></script>
		<script src="~/themes/gear/js/components/userBlock.js"></script>
		<script src="~/themes/gear/js/components/menuLink.js"></script>
		<script src="~/themes/gear/js/components/menu.js"></script>
		<script src="~/themes/gear/js/store/index.js"></script>
		<script src="~/themes/gear/js/layout/header.js"></script>
		<script src="~/themes/gear/js/directives/close-on-cLick-outside.js"></script>
		<script src="~/themes/gear/js/directives/vsetvalue.js"></script>
		<script src="~/themes/gear/js/layout/the-menu-sidebar.js"></script>
		<script src="~/themes/gear/js/layout/the-user-sidebar.js"></script>
		<script src="~/themes/gear/js/components/modal.js"></script>
		<script src="~/themes/gear/js/components/textBlock.js"></script>
		<script src="~/themes/gear/js/components//form-controls/radioInput.js"></script>
		<script src="~/themes/gear/js/components/form-controls/textarea.js"></script>
		<script src="~/themes/gear/js/components/form-controls/datepicker.js"></script>
		<script src="~/themes/gear/js/components/form-controls/yearpicker.js"></script>
		<script src="~/themes/gear/js/components/form-controls/input.js"></script>
		<script src="~/themes/gear/js/components/form-controls/file.js"></script>
		<script src="~/themes/gear/js/components/form-controls/select.js"></script>
		<script src="~/themes/gear/js/components/dropdownButton.js"></script>
		@RenderSection("Scripts", false)
		@Html.PartialViewScripts()
		<script type="text/x-template" id="app-template">
			<div>
				<Header />
				<TheMenuSidebar />
				<TheUserSidebar />
				<div class="main-content">
					<div>
						<div class="d-flex align-items-center">
							<h2 class="page-title">@ViewData["Title"]</h2>
							<div class="ml-auto">
								<a href="#" class="details-page-actions" data-toggle="dropdown">
									<i data-feather="more-vertical"></i>
								</a>
								<div class="dropdown-menu">
									<a class="dropdown-item" @@click="openModal" href="#">Edit</a>
								</div>
							</div>
							<Breadcrumb v-if="menuLoaded" className="breadcrumb ml-auto mr-5" />
						</div>
					</div>
					@RenderBody()
				</div>
			</div>
		</script>
		<script>
			moment.locale('en');
			const t = key => window.translate(key);
			const toast = new ToastNotifier();
			Vue.use(Vuex);
			Vue.use(AsyncComputed);
			Vue.use(VueTelInput);
			var app = new Vue({
				el: "#app",
				template: "#app-template",
				store,
				computed: {
					menuLoaded() {
						return this.$store.state.menuLoaded
					}
				},
				components: {
					store
				},
				mounted() {
					//this.$store.dispatch('getAllJobPositions');
				}
			});
		</script>
	</body>
</html>
}
else
{
@RenderBody()
@RenderSection("Scripts", false)
}